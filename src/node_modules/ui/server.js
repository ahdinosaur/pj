var net = require('net')
var pixelsToOpc = require('ndpixels-opc')

module.exports = createUi

function createUi (config) {
  var socket = net.connect(
    config.net,
    function () {
      console.log(
        "connected to",
        'tcp://' + socket.remoteAddress + ':' + socket.remotePort
      )
    }
  )
  .on('error', function (err) {
    throw err
  })

  var ui = pixelsToOpc()

  ui.pipe(socket)

  return ui
}
