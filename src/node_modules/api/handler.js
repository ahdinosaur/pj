var rainbowPixels = require('rainbow-pixels')
var throttle = require('floodgate')

var config = require('config')

module.exports = handleApi

function handleApi (stream) {
  return rainbowPixels(config.api.rainbow)
    .pipe(throttle({
      objectMode: true,
      interval: 1000 / config.api.fps
    }))
    .pipe(stream)
}
